!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"undefined"!=typeof exports?t(exports):(t(t={}),e.SearchResults=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";function l(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(s="Object"===s&&e.constructor?e.constructor.name:s)||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function t(t,e){var s,r=Object.keys(t);return Object.getOwnPropertySymbols&&(s=Object.getOwnPropertySymbols(t),e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)),r}function i(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t(Object(n),!0).forEach((function(e){var t,s;t=r,s=n[e],e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={template:'<div :class="{ \'search-results\': true }" :data-loading="loading" role="dialog" aria-modal="true"> <SearchForm v-model="inputTerm" class="search-results__form" id="search-results-form" :label="strings.label" :submit-label="strings.submit" :clear-label="strings.close" :hide-reset="true" @submit="handleSearch" > <button class="search-form__close" @click="closeForm" type="button"> <span class="screen-reader-text" v-html="strings.close"></span> </button> </SearchForm> <div class="search-results__inner"> <div class="container"> <p v-if="!value" class="search-results__message" v-html="strings.prompt"></p> <p class="search-results__message" ref="resultCount" tabindex="-1" v-else> {{ strings.results }} <span class="search-results__current-term">"{{ value }}"</span> <span class="screen-reader-text">({{ total }} result{{ total === 1 ? \'\' : \'s\' }} found, displaying {{ results.length }})</span> </p> <ul class="search-results__list" v-if="results.length > 0"> <li v-for="result in results" class="search-result click-control-item" :key="result.id" ref="results"> <div class="search-result__body"> <p class="search-result__tags eyebrow" v-if="typeof result.tags !== \'undefined\' && result.tags.length > 0"> {{ result.tags.join(\', \') }} </p> <h4 class="search-result__title"><a :href="result.url" v-html="result.title"></a></h4> <p v-html="result.description" class="search-result__description"></p> <a :href="result.url" class="search-result__link link click-control-element"> {{ result.url }} </a> </div> </li> </ul> <p v-else-if="!loading && value" class="search-results__message search-results__message--error" v-html="strings.noResults"></p> <nav class="search-results__pagination pagination" v-if="hasMore"> <button class="pagination__link pagination__link--next button button--primary" :aria-disabled="loading" @click="setPage(page + 1)" v-html="strings.loadMore"> </button> </nav> </div> </div> </div>',name:"SearchResults",components:{SearchForm:window.SearchForm.default},props:{value:{type:String}},data:function(){return{perPage:10,inputTerm:this.value,query:{},strings:window.searchStrings,loading:!1,page:1,results:[],previousFocus:null,clearTrap:null,total:0}},watch:{value:function(e){this.inputTerm!==e&&(this.inputTerm=e),this.getResults(e,1)},getResults:function(){windows.themeUtility.clickControl()}},computed:{hasMore:function(){return this.total>this.results.length},totalPages:function(){return Math.ceil(this.total/this.perPage)}},methods:{handleSearch:function(){this.getResults(this.inputTerm,1)},topOfResults:function(){this.$el.scrollTop=0},getResults:function(e){var t,s,r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.loading||(t=i({},this.query),s="/_hcms/search?",t.term=e,t.limit=this.perPage,t.offset=this.perPage*(n-1),Object.keys(t).forEach((function(e){s+=e+"="+t[e]+"&type=SITE_PAGE&type=BLOG_POST&type=LISTING_PAGE&"})),s=s.substring(0,s.length-1),this.loading=!0,this.page=n,this.inputTerm=e,this.$emit("input",e),fetch(s).then((function(e){return e.json()})).then((function(e){r.total=e.total;e=e.results||[];var t=1===n?0:r.results.length;r.results=1===n?e:[].concat(l(r.results),l(e)),Vue.nextTick((function(){(0===t?r.$refs.resultCount:r.$refs.results[t].querySelector("a")).focus()}))})).finally((function(){r.loading=!1})))},setPage:function(e){e=e<this.totalPages?e:this.totalPages,this.getResults(this.value,e)},closeForm:function(){this.$emit("close")}},mounted:function(){var e=this;document.documentElement.classList.add("search-active"),Vue.nextTick((function(){e.previousFocus=document.activeElement,e.clearTrap=window.themeUtility.trapFocus(e.$el,"#search-results-form")})),this.value&&this.getResults(this.value,1)},destroyed:function(){var e;document.documentElement.classList.remove("search-active"),this.clearTrap(),null!=(e=this.previousFocus)&&e.focus()}};e.default=s}));
//# sourceURL=https://cdn2.hubspot.net/hub/74005/hub_generated/template_assets/78893724949/1681218730030/asset-marketplace/Pragyotsav-free/assets/vue-components/SearchResults.js